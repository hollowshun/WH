import{d as B,a as A,r as $,I as c,o as y,i as p,f,h as l,w as d,g as i,aa as b,T as g,a1 as R,aC as V,aD as I,c as k,ab as x,_ as P}from"./index.4e28b913.js";import{E as G,a as w}from"./el-form-item.e0847636.js";import"./el-input.8ee768f7.js";const v=[{id:1,name:"\u624B\u673A",pic:"https://ms.bdimg.com/pacific/0/pic/1528070004_636456351.jpg"},{id:2,name:"\u624B\u8868",pic:"https://img1.baidu.com/it/u=2631716577,1296460670&fm=253&fmt=auto&app=120&f=JPEG"},{id:3,name:"\u82F9\u679C",pic:"https://img2.baidu.com/it/u=2611478896,137965957&fm=253&fmt=auto&app=138&f=JPEG"},{id:4,name:"\u68D2\u68D2\u7CD6",pic:"https://img2.baidu.com/it/u=576980037,1655121105&fm=253&fmt=auto&app=138&f=PNG"},{id:5,name:"\u5A03\u5A03",pic:"https://img2.baidu.com/it/u=4075390137,3967712457&fm=253&fmt=auto&app=138&f=PNG"},{id:6,name:"\u6728\u9A6C",pic:"https://img1.baidu.com/it/u=2434318933,2727681086&fm=253&fmt=auto&app=120&f=JPEG"},{id:7,name:"\u5FB7\u8299",pic:"https://img0.baidu.com/it/u=1378564582,2397555841&fm=253&fmt=auto&app=120&f=JPEG"},{id:8,name:"\u73AB\u7470",pic:"https://img1.baidu.com/it/u=1125656938,422247900&fm=253&fmt=auto&app=120&f=JPEG"}],L={class:"container"},J=["src"],M=B({__name:"luckDraw",setup(N){const e=A({prizeList:v,isRunning:!1,baseRunAngle:5,prizeId:0,second:4}),r=$(null),o=c(()=>360/e.prizeList.length),_=c(()=>360*e.baseRunAngle+360-e.prizeId*o.value-o.value/2),m=c(()=>{const n=e.prizeList.length,t=["#5352b3","#363589"];let s="";for(let u=0;u<n;u++)s+=`${t[u%2]} ${o.value*u}deg ${o.value*(u+1)}deg,`;return`
            background: conic-gradient(${s.slice(0,-1)});
          `}),C=c(()=>{const n=o.value;return t=>`
              width: ${2*270*Math.sin(n/2*Math.PI/180)}px;
              height: 270px;
              transform: rotate(${n*t+n/2}deg);
              transform-origin: 50% 100%;
            `}),E=()=>{e.isRunning||(e.isRunning=!0,h())},h=()=>{r.value.style=`
            ${m.value}
            transform: rotate(${_.value}deg);
            transition: all ${e.second}s ease;
          `,setTimeout(()=>{F()},1e3*e.second)},F=()=>{e.isRunning=!1,r.value.style=`
            ${m.value}
            transform: rotate(${_.value-360*e.baseRunAngle}deg);
          `,I.alert(`\u606D\u559C\u4E2D\u7684${e.prizeList[e.prizeId].name}\u5956\u54C1`,"\u4E2D\u5956\u6E05\u5355")};return y(()=>{r.value.style=`${m.value} transform: rotate(-${o.value/2}deg)`}),(n,t)=>{const s=k,u=G,D=w;return p(),f("div",null,[l(D,{inline:!0,model:e,class:"demo-form-inline"},{default:d(()=>[l(u,{label:"\u4E2D\u5956\u4E0B\u6807\u7D22\u5F15"},{default:d(()=>[l(s,{modelValue:e.prizeId,"onUpdate:modelValue":t[0]||(t[0]=a=>e.prizeId=a),placeholder:"\u4ECE\u624B\u673A0\u5F00\u59CB\u987A\u65F6\u9488\u6570"},null,8,["modelValue"])]),_:1}),l(u,{label:"\u65CB\u8F6C\u5708\u6570"},{default:d(()=>[l(s,{modelValue:e.baseRunAngle,"onUpdate:modelValue":t[1]||(t[1]=a=>e.baseRunAngle=a),placeholder:"\u5956\u76D8\u65CB\u8F6C\u5708\u6570"},null,8,["modelValue"])]),_:1}),l(u,{label:"\u65CB\u8F6C\u65F6\u957F(\u5355\u4F4Ds)"},{default:d(()=>[l(s,{modelValue:e.second,"onUpdate:modelValue":t[2]||(t[2]=a=>e.second=a),placeholder:"\u5956\u76D8\u65CB\u8F6C\u65F6\u957F(s)"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),i("div",L,[i("div",{class:"prize-list",ref_key:"prizeWrap",ref:r,style:b(g(m))},[(p(!0),f(R,null,V(g(v),(a,z)=>(p(),f("div",{class:"prize-item",style:b(g(C)(z)),key:a.id},[i("img",{src:a.pic,alt:""},null,8,J),i("p",null,x(a.name),1)],4))),128))],4),i("div",{class:"btn",onClick:E})])])}}});const W=P(M,[["__scopeId","data-v-fcca5cb0"]]);export{W as default};
